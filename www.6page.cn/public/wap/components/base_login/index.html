<div>
    <div :class="{ mask: loginShow && !inline }" @touchmove.prevent @click="$emit('login-close')"></div>
    <form :class="{ on: loginShow, inline: inline }" class="base-login">
        <a v-show="cancelBtn" href="javascript:" @click="$emit('login-close')">
            <i class="iconfont iconguanbi"></i>
        </a>
        <template v-if="login_types != 2">
            <div v-show="state != 3">{{ state == 1 ? '注册账号' : '忘记密码' }}</div>
            <div v-show="state == 3">
                <label>
                    <input v-model="type" :value="1" type="radio" hidden><span>账号登录</span>
                </label>
                <label>
                    <input v-model="type" :value="2" type="radio" hidden><span>短信登录</span>
                </label>
            </div>
            <label class="login-input">
                <i class="iconfont iconshouji"></i>
                <input v-model.trim="phone" type="tel" placeholder="请填写账号">
            </label>
            <div class="login-input" v-show="state != 3 || type == 2">
                <label>
                    <i class="iconfont iconyanzhengma"></i>
                    <input v-model.trim="code" type="text" placeholder="请填写验证码">
                </label>
                <button class="get-code" id="captcha-btn" type="button" :disabled="count >= 0" @click="getCode">{{ count < 0 ? '获取验证码' : '重新获取(' + count + 's)' }}</button>
            </div>
            <label class="login-input" v-show="state != 3 || type == 1">
                <i class="iconfont iconmima"></i>
                <input v-model.trim="pwd" type="password" maxlength="16" :placeholder="pwdPlaceholder">
            </label>
        </template>
        <div v-if="!isWeChat && login_types == 2">请在手机端微信打开</div>
        <div v-else class="login-checkbox" v-show="state != 2">
            <label>
                <input v-model="agree" type="checkbox" hidden>
                <i class="iconfont icongouxuan"></i>
                <span>已阅读并同意</span>
            </label>
            <a href="javascript:" @click="goAgree">《{{ siteName }}用户协议》</a>
        </div>
        <div class="login-button-box" :class="{'wechat-only': login_types == 2}">
            <template v-if="login_types != 2">
                <button class="login-button" v-show="state == 1" type="button" @click="register">立即注册</button>
                <button class="login-button" v-show="state == 2" type="button" @click="register">确认</button>
                <button class="login-button" v-show="state == 3" type="button" @click="login">立即登录</button>
            </template>
            <button v-if="isWeChat && login_types != 3" class="login-button wechat-login-btn" v-show="state == 3" type="button" @click="wechatLogin">微信一键登录</button>
        </div>
        <template v-if="login_types != 2">
        <div class="login-switch">
            <span v-show="state == 1">已有账号？</span>
            <a class="login-now" v-show="state != 3" href="javascript:" @click="state = 3">立即登录</a>
            <a v-show="state == 3" href="javascript:" @click="state = 1">立即注册</a>
            <a v-show="state == 3" href="javascript:" @click="state = 2">忘记密码？</a>
        </div>
        </template>
    </form>
    <div id="slide-captcha" class="slide-captcha"></div>
</div>